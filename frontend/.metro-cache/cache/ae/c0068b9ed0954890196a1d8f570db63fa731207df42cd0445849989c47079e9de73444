{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await _servicesApi.api.get('/api/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete _servicesApi.api.defaults.headers.common['Authorization'];\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      const response = await _servicesApi.api.post('/api/auth/login', {\n        username,\n        password\n      });\n      const {\n        access_token\n      } = response.data;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      const userResponse = await _servicesApi.api.get('/api/auth/me');\n      setUser(userResponse.data);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete _servicesApi.api.defaults.headers.common['Authorization'];\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":84,"map":[[13,2,21,0,"exports"],[13,9,21,0],[13,10,21,0,"AuthProvider"],[13,22,21,0],[13,25,21,0,"AuthProvider"],[13,37,21,0],[14,2,77,0,"exports"],[14,9,77,0],[14,10,77,0,"useAuth"],[14,17,77,0],[14,20,77,0,"useAuth"],[14,27,77,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,19,0],[20,8,19,6,"AuthContext"],[20,19,19,17],[20,35,19,20],[20,39,19,20,"createContext"],[20,45,19,33],[20,46,19,33,"createContext"],[20,59,19,33],[20,61,19,63,"undefined"],[20,70,19,72],[20,71,19,73],[21,2,21,7],[21,11,21,16,"AuthProvider"],[21,23,21,28,"AuthProvider"],[21,24,21,29],[22,4,21,31,"children"],[23,2,21,71],[23,3,21,72],[23,5,21,74],[24,4,22,2],[24,10,22,8],[24,11,22,9,"user"],[24,15,22,13],[24,17,22,15,"setUser"],[24,24,22,22],[24,25,22,23],[24,28,22,26],[24,32,22,26,"useState"],[24,38,22,34],[24,39,22,34,"useState"],[24,47,22,34],[24,49,22,48],[24,53,22,52],[24,54,22,53],[25,4,23,2],[25,10,23,8],[25,11,23,9,"isLoading"],[25,20,23,18],[25,22,23,20,"setIsLoading"],[25,34,23,32],[25,35,23,33],[25,38,23,36],[25,42,23,36,"useState"],[25,48,23,44],[25,49,23,44,"useState"],[25,57,23,44],[25,59,23,45],[25,63,23,49],[25,64,23,50],[26,4,25,2],[26,8,25,2,"useEffect"],[26,14,25,11],[26,15,25,11,"useEffect"],[26,24,25,11],[26,26,25,12],[26,32,25,18],[27,6,26,4,"checkAuth"],[27,15,26,13],[27,16,26,14],[27,17,26,15],[28,4,27,2],[28,5,27,3],[28,7,27,5],[28,9,27,7],[28,10,27,8],[29,4,29,2],[29,10,29,8,"checkAuth"],[29,19,29,17],[29,22,29,20],[29,28,29,20,"checkAuth"],[29,29,29,20],[29,34,29,32],[30,6,30,4],[30,10,30,8],[31,8,31,6],[31,14,31,12,"token"],[31,19,31,17],[31,22,31,20],[31,28,31,26,"AsyncStorage"],[31,40,31,38],[31,41,31,38,"default"],[31,48,31,38],[31,49,31,39,"getItem"],[31,56,31,46],[31,57,31,47],[31,69,31,59],[31,70,31,60],[32,8,32,6],[32,12,32,10,"token"],[32,17,32,15],[32,19,32,17],[33,10,33,8,"api"],[33,22,33,11],[33,23,33,11,"api"],[33,26,33,11],[33,27,33,12,"defaults"],[33,35,33,20],[33,36,33,21,"headers"],[33,43,33,28],[33,44,33,29,"common"],[33,50,33,35],[33,51,33,36],[33,66,33,51],[33,67,33,52],[33,70,33,55],[33,80,33,65,"token"],[33,85,33,70],[33,87,33,72],[34,10,34,8],[34,16,34,14,"response"],[34,24,34,22],[34,27,34,25],[34,33,34,31,"api"],[34,45,34,34],[34,46,34,34,"api"],[34,49,34,34],[34,50,34,35,"get"],[34,53,34,38],[34,54,34,39],[34,68,34,53],[34,69,34,54],[35,10,35,8,"setUser"],[35,17,35,15],[35,18,35,16,"response"],[35,26,35,24],[35,27,35,25,"data"],[35,31,35,29],[35,32,35,30],[36,8,36,6],[37,6,37,4],[37,7,37,5],[37,8,37,6],[37,15,37,13,"error"],[37,20,37,18],[37,22,37,20],[38,8,38,6],[38,14,38,12,"AsyncStorage"],[38,26,38,24],[38,27,38,24,"default"],[38,34,38,24],[38,35,38,25,"removeItem"],[38,45,38,35],[38,46,38,36],[38,58,38,48],[38,59,38,49],[39,8,39,6],[39,15,39,13,"api"],[39,27,39,16],[39,28,39,16,"api"],[39,31,39,16],[39,32,39,17,"defaults"],[39,40,39,25],[39,41,39,26,"headers"],[39,48,39,33],[39,49,39,34,"common"],[39,55,39,40],[39,56,39,41],[39,71,39,56],[39,72,39,57],[40,6,40,4],[40,7,40,5],[40,16,40,14],[41,8,41,6,"setIsLoading"],[41,20,41,18],[41,21,41,19],[41,26,41,24],[41,27,41,25],[42,6,42,4],[43,4,43,2],[43,5,43,3],[44,4,45,2],[44,10,45,8,"login"],[44,15,45,13],[44,18,45,16],[44,24,45,16,"login"],[44,25,45,23,"username"],[44,33,45,39],[44,35,45,41,"password"],[44,43,45,57],[44,48,45,62],[45,6,46,4],[45,12,46,10,"response"],[45,20,46,18],[45,23,46,21],[45,29,46,27,"api"],[45,41,46,30],[45,42,46,30,"api"],[45,45,46,30],[45,46,46,31,"post"],[45,50,46,35],[45,51,46,36],[45,68,46,53],[45,70,46,55],[46,8,46,57,"username"],[46,16,46,65],[47,8,46,67,"password"],[48,6,46,76],[48,7,46,77],[48,8,46,78],[49,6,47,4],[49,12,47,10],[50,8,47,12,"access_token"],[51,6,47,25],[51,7,47,26],[51,10,47,29,"response"],[51,18,47,37],[51,19,47,38,"data"],[51,23,47,42],[52,6,49,4],[52,12,49,10,"AsyncStorage"],[52,24,49,22],[52,25,49,22,"default"],[52,32,49,22],[52,33,49,23,"setItem"],[52,40,49,30],[52,41,49,31],[52,53,49,43],[52,55,49,45,"access_token"],[52,67,49,57],[52,68,49,58],[53,6,50,4,"api"],[53,18,50,7],[53,19,50,7,"api"],[53,22,50,7],[53,23,50,8,"defaults"],[53,31,50,16],[53,32,50,17,"headers"],[53,39,50,24],[53,40,50,25,"common"],[53,46,50,31],[53,47,50,32],[53,62,50,47],[53,63,50,48],[53,66,50,51],[53,76,50,61,"access_token"],[53,88,50,73],[53,90,50,75],[54,6,52,4],[54,12,52,10,"userResponse"],[54,24,52,22],[54,27,52,25],[54,33,52,31,"api"],[54,45,52,34],[54,46,52,34,"api"],[54,49,52,34],[54,50,52,35,"get"],[54,53,52,38],[54,54,52,39],[54,68,52,53],[54,69,52,54],[55,6,53,4,"setUser"],[55,13,53,11],[55,14,53,12,"userResponse"],[55,26,53,24],[55,27,53,25,"data"],[55,31,53,29],[55,32,53,30],[56,4,54,2],[56,5,54,3],[57,4,56,2],[57,10,56,8,"logout"],[57,16,56,14],[57,19,56,17],[57,25,56,17,"logout"],[57,26,56,17],[57,31,56,29],[58,6,57,4],[58,12,57,10,"AsyncStorage"],[58,24,57,22],[58,25,57,22,"default"],[58,32,57,22],[58,33,57,23,"removeItem"],[58,43,57,33],[58,44,57,34],[58,56,57,46],[58,57,57,47],[59,6,58,4],[59,13,58,11,"api"],[59,25,58,14],[59,26,58,14,"api"],[59,29,58,14],[59,30,58,15,"defaults"],[59,38,58,23],[59,39,58,24,"headers"],[59,46,58,31],[59,47,58,32,"common"],[59,53,58,38],[59,54,58,39],[59,69,58,54],[59,70,58,55],[60,6,59,4,"setUser"],[60,13,59,11],[60,14,59,12],[60,18,59,16],[60,19,59,17],[61,4,60,2],[61,5,60,3],[62,4,62,2],[62,24,63,4],[62,28,63,4,"_reactJsxDevRuntime"],[62,47,63,4],[62,48,63,4,"jsxDEV"],[62,54,63,4],[62,56,63,5,"AuthContext"],[62,67,63,16],[62,68,63,17,"Provider"],[62,76,63,25],[63,6,64,6,"value"],[63,11,64,11],[63,13,64,13],[64,8,65,8,"user"],[64,12,65,12],[65,8,66,8,"isLoading"],[65,17,66,17],[66,8,67,8,"isAuthenticated"],[66,23,67,23],[66,25,67,25],[66,26,67,26],[66,27,67,27,"user"],[66,31,67,31],[67,8,68,8,"login"],[67,13,68,13],[68,8,69,8,"logout"],[69,6,70,6],[69,7,70,8],[70,6,70,8,"children"],[70,14,70,8],[70,16,72,7,"children"],[71,4,72,15],[72,6,72,15,"fileName"],[72,14,72,15],[72,16,72,15,"_jsxFileName"],[72,28,72,15],[73,6,72,15,"lineNumber"],[73,16,72,15],[74,6,72,15,"columnNumber"],[74,18,72,15],[75,4,72,15],[75,11,73,26],[75,12,73,27],[76,2,75,0],[77,2,77,7],[77,11,77,16,"useAuth"],[77,18,77,23,"useAuth"],[77,19,77,23],[77,21,77,26],[78,4,78,2],[78,10,78,8,"context"],[78,17,78,15],[78,20,78,18],[78,24,78,18,"useContext"],[78,30,78,28],[78,31,78,28,"useContext"],[78,41,78,28],[78,43,78,29,"AuthContext"],[78,54,78,40],[78,55,78,41],[79,4,79,2],[79,8,79,6,"context"],[79,15,79,13],[79,20,79,18,"undefined"],[79,29,79,27],[79,31,79,29],[80,6,80,4],[80,12,80,10],[80,16,80,14,"Error"],[80,21,80,19],[80,22,80,20],[80,67,80,65],[80,68,80,66],[81,4,81,2],[82,4,82,2],[82,11,82,9,"context"],[82,18,82,16],[83,2,83,0],[84,0,83,1],[84,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","logout","useAuth"],"mappings":"AAA;OCoB;YCI;GDE;oBEE;GFc;gBGE;GHS;iBIE;GJI;CDe;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}