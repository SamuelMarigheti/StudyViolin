{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [mustChangePassword, setMustChangePassword] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await _servicesApi.api.get('/api/auth/me');\n          setUser(response.data);\n          setMustChangePassword(response.data.must_change_password || false);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete _servicesApi.api.defaults.headers.common['Authorization'];\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await _servicesApi.api.post('/api/auth/login', {\n          username,\n          password\n        });\n        const {\n          access_token,\n          must_change_password\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n        const userResponse = await _servicesApi.api.get('/api/auth/me');\n        setUser(userResponse.data);\n        setMustChangePassword(must_change_password || false);\n        return {\n          must_change_password: must_change_password || false\n        };\n      } catch (error) {\n        if (error.response?.status === 429) {\n          throw new Error('Muitas tentativas falhas. Aguarde 5 minutos.');\n        }\n        throw new Error(error.response?.data?.detail || 'Credenciais invÃ¡lidas');\n      }\n    };\n    const changeFirstPassword = async newPassword => {\n      await _servicesApi.api.post('/api/auth/first-login-password', {\n        new_password: newPassword\n      });\n      setMustChangePassword(false);\n      if (user) {\n        setUser({\n          ...user,\n          must_change_password: false\n        });\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete _servicesApi.api.defaults.headers.common['Authorization'];\n      setUser(null);\n      setMustChangePassword(false);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        mustChangePassword,\n        login,\n        logout,\n        changeFirstPassword,\n        setMustChangePassword\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":114,"map":[[13,2,25,0,"exports"],[13,9,25,0],[13,10,25,0,"AuthProvider"],[13,22,25,0],[13,25,25,0,"AuthProvider"],[13,37,25,0],[14,2,105,0,"exports"],[14,9,105,0],[14,10,105,0,"useAuth"],[14,17,105,0],[14,20,105,0,"useAuth"],[14,27,105,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,23,0],[20,8,23,6,"AuthContext"],[20,19,23,17],[20,35,23,20],[20,39,23,20,"createContext"],[20,45,23,33],[20,46,23,33,"createContext"],[20,59,23,33],[20,61,23,63,"undefined"],[20,70,23,72],[20,71,23,73],[21,2,25,7],[21,11,25,16,"AuthProvider"],[21,23,25,28,"AuthProvider"],[21,24,25,29],[22,4,25,31,"children"],[23,2,25,71],[23,3,25,72],[23,5,25,74],[24,4,26,2],[24,10,26,8],[24,11,26,9,"user"],[24,15,26,13],[24,17,26,15,"setUser"],[24,24,26,22],[24,25,26,23],[24,28,26,26],[24,32,26,26,"useState"],[24,38,26,34],[24,39,26,34,"useState"],[24,47,26,34],[24,49,26,48],[24,53,26,52],[24,54,26,53],[25,4,27,2],[25,10,27,8],[25,11,27,9,"isLoading"],[25,20,27,18],[25,22,27,20,"setIsLoading"],[25,34,27,32],[25,35,27,33],[25,38,27,36],[25,42,27,36,"useState"],[25,48,27,44],[25,49,27,44,"useState"],[25,57,27,44],[25,59,27,45],[25,63,27,49],[25,64,27,50],[26,4,28,2],[26,10,28,8],[26,11,28,9,"mustChangePassword"],[26,29,28,27],[26,31,28,29,"setMustChangePassword"],[26,52,28,50],[26,53,28,51],[26,56,28,54],[26,60,28,54,"useState"],[26,66,28,62],[26,67,28,62,"useState"],[26,75,28,62],[26,77,28,63],[26,82,28,68],[26,83,28,69],[27,4,30,2],[27,8,30,2,"useEffect"],[27,14,30,11],[27,15,30,11,"useEffect"],[27,24,30,11],[27,26,30,12],[27,32,30,18],[28,6,31,4,"checkAuth"],[28,15,31,13],[28,16,31,14],[28,17,31,15],[29,4,32,2],[29,5,32,3],[29,7,32,5],[29,9,32,7],[29,10,32,8],[30,4,34,2],[30,10,34,8,"checkAuth"],[30,19,34,17],[30,22,34,20],[30,28,34,20,"checkAuth"],[30,29,34,20],[30,34,34,32],[31,6,35,4],[31,10,35,8],[32,8,36,6],[32,14,36,12,"token"],[32,19,36,17],[32,22,36,20],[32,28,36,26,"AsyncStorage"],[32,40,36,38],[32,41,36,38,"default"],[32,48,36,38],[32,49,36,39,"getItem"],[32,56,36,46],[32,57,36,47],[32,69,36,59],[32,70,36,60],[33,8,37,6],[33,12,37,10,"token"],[33,17,37,15],[33,19,37,17],[34,10,38,8,"api"],[34,22,38,11],[34,23,38,11,"api"],[34,26,38,11],[34,27,38,12,"defaults"],[34,35,38,20],[34,36,38,21,"headers"],[34,43,38,28],[34,44,38,29,"common"],[34,50,38,35],[34,51,38,36],[34,66,38,51],[34,67,38,52],[34,70,38,55],[34,80,38,65,"token"],[34,85,38,70],[34,87,38,72],[35,10,39,8],[35,16,39,14,"response"],[35,24,39,22],[35,27,39,25],[35,33,39,31,"api"],[35,45,39,34],[35,46,39,34,"api"],[35,49,39,34],[35,50,39,35,"get"],[35,53,39,38],[35,54,39,39],[35,68,39,53],[35,69,39,54],[36,10,40,8,"setUser"],[36,17,40,15],[36,18,40,16,"response"],[36,26,40,24],[36,27,40,25,"data"],[36,31,40,29],[36,32,40,30],[37,10,41,8,"setMustChangePassword"],[37,31,41,29],[37,32,41,30,"response"],[37,40,41,38],[37,41,41,39,"data"],[37,45,41,43],[37,46,41,44,"must_change_password"],[37,66,41,64],[37,70,41,68],[37,75,41,73],[37,76,41,74],[38,8,42,6],[39,6,43,4],[39,7,43,5],[39,8,43,6],[39,15,43,13,"error"],[39,20,43,18],[39,22,43,20],[40,8,44,6],[40,14,44,12,"AsyncStorage"],[40,26,44,24],[40,27,44,24,"default"],[40,34,44,24],[40,35,44,25,"removeItem"],[40,45,44,35],[40,46,44,36],[40,58,44,48],[40,59,44,49],[41,8,45,6],[41,15,45,13,"api"],[41,27,45,16],[41,28,45,16,"api"],[41,31,45,16],[41,32,45,17,"defaults"],[41,40,45,25],[41,41,45,26,"headers"],[41,48,45,33],[41,49,45,34,"common"],[41,55,45,40],[41,56,45,41],[41,71,45,56],[41,72,45,57],[42,6,46,4],[42,7,46,5],[42,16,46,14],[43,8,47,6,"setIsLoading"],[43,20,47,18],[43,21,47,19],[43,26,47,24],[43,27,47,25],[44,6,48,4],[45,4,49,2],[45,5,49,3],[46,4,51,2],[46,10,51,8,"login"],[46,15,51,13],[46,18,51,16],[46,24,51,16,"login"],[46,25,51,23,"username"],[46,33,51,39],[46,35,51,41,"password"],[46,43,51,57],[46,48,51,62],[47,6,52,4],[47,10,52,8],[48,8,53,6],[48,14,53,12,"response"],[48,22,53,20],[48,25,53,23],[48,31,53,29,"api"],[48,43,53,32],[48,44,53,32,"api"],[48,47,53,32],[48,48,53,33,"post"],[48,52,53,37],[48,53,53,38],[48,70,53,55],[48,72,53,57],[49,10,53,59,"username"],[49,18,53,67],[50,10,53,69,"password"],[51,8,53,78],[51,9,53,79],[51,10,53,80],[52,8,54,6],[52,14,54,12],[53,10,54,14,"access_token"],[53,22,54,26],[54,10,54,28,"must_change_password"],[55,8,54,49],[55,9,54,50],[55,12,54,53,"response"],[55,20,54,61],[55,21,54,62,"data"],[55,25,54,66],[56,8,56,6],[56,14,56,12,"AsyncStorage"],[56,26,56,24],[56,27,56,24,"default"],[56,34,56,24],[56,35,56,25,"setItem"],[56,42,56,32],[56,43,56,33],[56,55,56,45],[56,57,56,47,"access_token"],[56,69,56,59],[56,70,56,60],[57,8,57,6,"api"],[57,20,57,9],[57,21,57,9,"api"],[57,24,57,9],[57,25,57,10,"defaults"],[57,33,57,18],[57,34,57,19,"headers"],[57,41,57,26],[57,42,57,27,"common"],[57,48,57,33],[57,49,57,34],[57,64,57,49],[57,65,57,50],[57,68,57,53],[57,78,57,63,"access_token"],[57,90,57,75],[57,92,57,77],[58,8,59,6],[58,14,59,12,"userResponse"],[58,26,59,24],[58,29,59,27],[58,35,59,33,"api"],[58,47,59,36],[58,48,59,36,"api"],[58,51,59,36],[58,52,59,37,"get"],[58,55,59,40],[58,56,59,41],[58,70,59,55],[58,71,59,56],[59,8,60,6,"setUser"],[59,15,60,13],[59,16,60,14,"userResponse"],[59,28,60,26],[59,29,60,27,"data"],[59,33,60,31],[59,34,60,32],[60,8,61,6,"setMustChangePassword"],[60,29,61,27],[60,30,61,28,"must_change_password"],[60,50,61,48],[60,54,61,52],[60,59,61,57],[60,60,61,58],[61,8,63,6],[61,15,63,13],[62,10,63,15,"must_change_password"],[62,30,63,35],[62,32,63,37,"must_change_password"],[62,52,63,57],[62,56,63,61],[63,8,63,67],[63,9,63,68],[64,6,64,4],[64,7,64,5],[64,8,64,6],[64,15,64,13,"error"],[64,20,64,23],[64,22,64,25],[65,8,65,6],[65,12,65,10,"error"],[65,17,65,15],[65,18,65,16,"response"],[65,26,65,24],[65,28,65,26,"status"],[65,34,65,32],[65,39,65,37],[65,42,65,40],[65,44,65,42],[66,10,66,8],[66,16,66,14],[66,20,66,18,"Error"],[66,25,66,23],[66,26,66,24],[66,72,66,70],[66,73,66,71],[67,8,67,6],[68,8,68,6],[68,14,68,12],[68,18,68,16,"Error"],[68,23,68,21],[68,24,68,22,"error"],[68,29,68,27],[68,30,68,28,"response"],[68,38,68,36],[68,40,68,38,"data"],[68,44,68,42],[68,46,68,44,"detail"],[68,52,68,50],[68,56,68,54],[68,79,68,77],[68,80,68,78],[69,6,69,4],[70,4,70,2],[70,5,70,3],[71,4,72,2],[71,10,72,8,"changeFirstPassword"],[71,29,72,27],[71,32,72,30],[71,38,72,37,"newPassword"],[71,49,72,56],[71,53,72,61],[72,6,73,4],[72,12,73,10,"api"],[72,24,73,13],[72,25,73,13,"api"],[72,28,73,13],[72,29,73,14,"post"],[72,33,73,18],[72,34,73,19],[72,66,73,51],[72,68,73,53],[73,8,73,55,"new_password"],[73,20,73,67],[73,22,73,69,"newPassword"],[74,6,73,81],[74,7,73,82],[74,8,73,83],[75,6,74,4,"setMustChangePassword"],[75,27,74,25],[75,28,74,26],[75,33,74,31],[75,34,74,32],[76,6,75,4],[76,10,75,8,"user"],[76,14,75,12],[76,16,75,14],[77,8,76,6,"setUser"],[77,15,76,13],[77,16,76,14],[78,10,76,16],[78,13,76,19,"user"],[78,17,76,23],[79,10,76,25,"must_change_password"],[79,30,76,45],[79,32,76,47],[80,8,76,53],[80,9,76,54],[80,10,76,55],[81,6,77,4],[82,4,78,2],[82,5,78,3],[83,4,80,2],[83,10,80,8,"logout"],[83,16,80,14],[83,19,80,17],[83,25,80,17,"logout"],[83,26,80,17],[83,31,80,29],[84,6,81,4],[84,12,81,10,"AsyncStorage"],[84,24,81,22],[84,25,81,22,"default"],[84,32,81,22],[84,33,81,23,"removeItem"],[84,43,81,33],[84,44,81,34],[84,56,81,46],[84,57,81,47],[85,6,82,4],[85,13,82,11,"api"],[85,25,82,14],[85,26,82,14,"api"],[85,29,82,14],[85,30,82,15,"defaults"],[85,38,82,23],[85,39,82,24,"headers"],[85,46,82,31],[85,47,82,32,"common"],[85,53,82,38],[85,54,82,39],[85,69,82,54],[85,70,82,55],[86,6,83,4,"setUser"],[86,13,83,11],[86,14,83,12],[86,18,83,16],[86,19,83,17],[87,6,84,4,"setMustChangePassword"],[87,27,84,25],[87,28,84,26],[87,33,84,31],[87,34,84,32],[88,4,85,2],[88,5,85,3],[89,4,87,2],[89,24,88,4],[89,28,88,4,"_reactJsxDevRuntime"],[89,47,88,4],[89,48,88,4,"jsxDEV"],[89,54,88,4],[89,56,88,5,"AuthContext"],[89,67,88,16],[89,68,88,17,"Provider"],[89,76,88,25],[90,6,89,6,"value"],[90,11,89,11],[90,13,89,13],[91,8,90,8,"user"],[91,12,90,12],[92,8,91,8,"isLoading"],[92,17,91,17],[93,8,92,8,"isAuthenticated"],[93,23,92,23],[93,25,92,25],[93,26,92,26],[93,27,92,27,"user"],[93,31,92,31],[94,8,93,8,"mustChangePassword"],[94,26,93,26],[95,8,94,8,"login"],[95,13,94,13],[96,8,95,8,"logout"],[96,14,95,14],[97,8,96,8,"changeFirstPassword"],[97,27,96,27],[98,8,97,8,"setMustChangePassword"],[99,6,98,6],[99,7,98,8],[100,6,98,8,"children"],[100,14,98,8],[100,16,100,7,"children"],[101,4,100,15],[102,6,100,15,"fileName"],[102,14,100,15],[102,16,100,15,"_jsxFileName"],[102,28,100,15],[103,6,100,15,"lineNumber"],[103,16,100,15],[104,6,100,15,"columnNumber"],[104,18,100,15],[105,4,100,15],[105,11,101,26],[105,12,101,27],[106,2,103,0],[107,2,105,7],[107,11,105,16,"useAuth"],[107,18,105,23,"useAuth"],[107,19,105,23],[107,21,105,26],[108,4,106,2],[108,10,106,8,"context"],[108,17,106,15],[108,20,106,18],[108,24,106,18,"useContext"],[108,30,106,28],[108,31,106,28,"useContext"],[108,41,106,28],[108,43,106,29,"AuthContext"],[108,54,106,40],[108,55,106,41],[109,4,107,2],[109,8,107,6,"context"],[109,15,107,13],[109,20,107,18,"undefined"],[109,29,107,27],[109,31,107,29],[110,6,108,4],[110,12,108,10],[110,16,108,14,"Error"],[110,21,108,19],[110,22,108,20],[110,67,108,65],[110,68,108,66],[111,4,109,2],[112,4,110,2],[112,11,110,9,"context"],[112,18,110,16],[113,2,111,0],[114,0,111,1],[114,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","changeFirstPassword","logout","useAuth"],"mappings":"AAA;OCwB;YCK;GDE;oBEE;GFe;gBGE;GHmB;8BIE;GJM;iBKE;GLK;CDkB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}