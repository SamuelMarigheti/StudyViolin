{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [mustChangePassword, setMustChangePassword] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('auth_token');\n        if (token) {\n          _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n          const response = await _servicesApi.api.get('/api/auth/me');\n          setUser(response.data);\n          setMustChangePassword(response.data.must_change_password || false);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        delete _servicesApi.api.defaults.headers.common['Authorization'];\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await _servicesApi.api.post('/api/auth/login', {\n          username,\n          password\n        });\n        const {\n          access_token,\n          must_change_password\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        _servicesApi.api.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n        const userResponse = await _servicesApi.api.get('/api/auth/me');\n        setUser(userResponse.data);\n        setMustChangePassword(must_change_password || false);\n        return {\n          must_change_password: must_change_password || false\n        };\n      } catch (error) {\n        if (error.response?.status === 429) {\n          throw new Error('Muitas tentativas falhas. Aguarde 5 minutos.');\n        }\n        throw new Error(error.response?.data?.detail || 'Credenciais invÃ¡lidas');\n      }\n    };\n    const changeFirstPassword = async newPassword => {\n      await _servicesApi.api.post('/api/auth/first-login-password', {\n        new_password: newPassword\n      });\n      setMustChangePassword(false);\n      if (user) {\n        setUser(Object.assign({}, user, {\n          must_change_password: false\n        }));\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      delete _servicesApi.api.defaults.headers.common['Authorization'];\n      setUser(null);\n      setMustChangePassword(false);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        mustChangePassword,\n        login,\n        logout,\n        changeFirstPassword,\n        setMustChangePassword\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"K5GAbb3/vrv2gvNUPnqaiJNwh5Y=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":122,"map":[[15,2,25,0,"exports"],[15,9,25,0],[15,10,25,0,"AuthProvider"],[15,22,25,0],[15,25,25,0,"AuthProvider"],[15,37,25,0],[16,2,105,0,"exports"],[16,9,105,0],[16,10,105,0,"useAuth"],[16,17,105,0],[16,20,105,0,"useAuth"],[16,27,105,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,23,0],[22,8,23,6,"AuthContext"],[22,19,23,17],[22,35,23,20],[22,39,23,20,"createContext"],[22,45,23,33],[22,46,23,33,"createContext"],[22,59,23,33],[22,61,23,63,"undefined"],[22,70,23,72],[22,71,23,73],[23,2,25,7],[23,11,25,16,"AuthProvider"],[23,23,25,28,"AuthProvider"],[23,24,25,29],[24,4,25,31,"children"],[25,2,25,71],[25,3,25,72],[25,5,25,74],[26,4,25,74,"_s"],[26,6,25,74],[27,4,26,2],[27,10,26,8],[27,11,26,9,"user"],[27,15,26,13],[27,17,26,15,"setUser"],[27,24,26,22],[27,25,26,23],[27,28,26,26],[27,32,26,26,"useState"],[27,38,26,34],[27,39,26,34,"useState"],[27,47,26,34],[27,49,26,48],[27,53,26,52],[27,54,26,53],[28,4,27,2],[28,10,27,8],[28,11,27,9,"isLoading"],[28,20,27,18],[28,22,27,20,"setIsLoading"],[28,34,27,32],[28,35,27,33],[28,38,27,36],[28,42,27,36,"useState"],[28,48,27,44],[28,49,27,44,"useState"],[28,57,27,44],[28,59,27,45],[28,63,27,49],[28,64,27,50],[29,4,28,2],[29,10,28,8],[29,11,28,9,"mustChangePassword"],[29,29,28,27],[29,31,28,29,"setMustChangePassword"],[29,52,28,50],[29,53,28,51],[29,56,28,54],[29,60,28,54,"useState"],[29,66,28,62],[29,67,28,62,"useState"],[29,75,28,62],[29,77,28,63],[29,82,28,68],[29,83,28,69],[30,4,30,2],[30,8,30,2,"useEffect"],[30,14,30,11],[30,15,30,11,"useEffect"],[30,24,30,11],[30,26,30,12],[30,32,30,18],[31,6,31,4,"checkAuth"],[31,15,31,13],[31,16,31,14],[31,17,31,15],[32,4,32,2],[32,5,32,3],[32,7,32,5],[32,9,32,7],[32,10,32,8],[33,4,34,2],[33,10,34,8,"checkAuth"],[33,19,34,17],[33,22,34,20],[33,28,34,20,"checkAuth"],[33,29,34,20],[33,34,34,32],[34,6,35,4],[34,10,35,8],[35,8,36,6],[35,14,36,12,"token"],[35,19,36,17],[35,22,36,20],[35,28,36,26,"AsyncStorage"],[35,40,36,38],[35,41,36,38,"default"],[35,48,36,38],[35,49,36,39,"getItem"],[35,56,36,46],[35,57,36,47],[35,69,36,59],[35,70,36,60],[36,8,37,6],[36,12,37,10,"token"],[36,17,37,15],[36,19,37,17],[37,10,38,8,"api"],[37,22,38,11],[37,23,38,11,"api"],[37,26,38,11],[37,27,38,12,"defaults"],[37,35,38,20],[37,36,38,21,"headers"],[37,43,38,28],[37,44,38,29,"common"],[37,50,38,35],[37,51,38,36],[37,66,38,51],[37,67,38,52],[37,70,38,55],[37,80,38,65,"token"],[37,85,38,70],[37,87,38,72],[38,10,39,8],[38,16,39,14,"response"],[38,24,39,22],[38,27,39,25],[38,33,39,31,"api"],[38,45,39,34],[38,46,39,34,"api"],[38,49,39,34],[38,50,39,35,"get"],[38,53,39,38],[38,54,39,39],[38,68,39,53],[38,69,39,54],[39,10,40,8,"setUser"],[39,17,40,15],[39,18,40,16,"response"],[39,26,40,24],[39,27,40,25,"data"],[39,31,40,29],[39,32,40,30],[40,10,41,8,"setMustChangePassword"],[40,31,41,29],[40,32,41,30,"response"],[40,40,41,38],[40,41,41,39,"data"],[40,45,41,43],[40,46,41,44,"must_change_password"],[40,66,41,64],[40,70,41,68],[40,75,41,73],[40,76,41,74],[41,8,42,6],[42,6,43,4],[42,7,43,5],[42,8,43,6],[42,15,43,13,"error"],[42,20,43,18],[42,22,43,20],[43,8,44,6],[43,14,44,12,"AsyncStorage"],[43,26,44,24],[43,27,44,24,"default"],[43,34,44,24],[43,35,44,25,"removeItem"],[43,45,44,35],[43,46,44,36],[43,58,44,48],[43,59,44,49],[44,8,45,6],[44,15,45,13,"api"],[44,27,45,16],[44,28,45,16,"api"],[44,31,45,16],[44,32,45,17,"defaults"],[44,40,45,25],[44,41,45,26,"headers"],[44,48,45,33],[44,49,45,34,"common"],[44,55,45,40],[44,56,45,41],[44,71,45,56],[44,72,45,57],[45,6,46,4],[45,7,46,5],[45,16,46,14],[46,8,47,6,"setIsLoading"],[46,20,47,18],[46,21,47,19],[46,26,47,24],[46,27,47,25],[47,6,48,4],[48,4,49,2],[48,5,49,3],[49,4,51,2],[49,10,51,8,"login"],[49,15,51,13],[49,18,51,16],[49,24,51,16,"login"],[49,25,51,23,"username"],[49,33,51,39],[49,35,51,41,"password"],[49,43,51,57],[49,48,51,62],[50,6,52,4],[50,10,52,8],[51,8,53,6],[51,14,53,12,"response"],[51,22,53,20],[51,25,53,23],[51,31,53,29,"api"],[51,43,53,32],[51,44,53,32,"api"],[51,47,53,32],[51,48,53,33,"post"],[51,52,53,37],[51,53,53,38],[51,70,53,55],[51,72,53,57],[52,10,53,59,"username"],[52,18,53,67],[53,10,53,69,"password"],[54,8,53,78],[54,9,53,79],[54,10,53,80],[55,8,54,6],[55,14,54,12],[56,10,54,14,"access_token"],[56,22,54,26],[57,10,54,28,"must_change_password"],[58,8,54,49],[58,9,54,50],[58,12,54,53,"response"],[58,20,54,61],[58,21,54,62,"data"],[58,25,54,66],[59,8,56,6],[59,14,56,12,"AsyncStorage"],[59,26,56,24],[59,27,56,24,"default"],[59,34,56,24],[59,35,56,25,"setItem"],[59,42,56,32],[59,43,56,33],[59,55,56,45],[59,57,56,47,"access_token"],[59,69,56,59],[59,70,56,60],[60,8,57,6,"api"],[60,20,57,9],[60,21,57,9,"api"],[60,24,57,9],[60,25,57,10,"defaults"],[60,33,57,18],[60,34,57,19,"headers"],[60,41,57,26],[60,42,57,27,"common"],[60,48,57,33],[60,49,57,34],[60,64,57,49],[60,65,57,50],[60,68,57,53],[60,78,57,63,"access_token"],[60,90,57,75],[60,92,57,77],[61,8,59,6],[61,14,59,12,"userResponse"],[61,26,59,24],[61,29,59,27],[61,35,59,33,"api"],[61,47,59,36],[61,48,59,36,"api"],[61,51,59,36],[61,52,59,37,"get"],[61,55,59,40],[61,56,59,41],[61,70,59,55],[61,71,59,56],[62,8,60,6,"setUser"],[62,15,60,13],[62,16,60,14,"userResponse"],[62,28,60,26],[62,29,60,27,"data"],[62,33,60,31],[62,34,60,32],[63,8,61,6,"setMustChangePassword"],[63,29,61,27],[63,30,61,28,"must_change_password"],[63,50,61,48],[63,54,61,52],[63,59,61,57],[63,60,61,58],[64,8,63,6],[64,15,63,13],[65,10,63,15,"must_change_password"],[65,30,63,35],[65,32,63,37,"must_change_password"],[65,52,63,57],[65,56,63,61],[66,8,63,67],[66,9,63,68],[67,6,64,4],[67,7,64,5],[67,8,64,6],[67,15,64,13,"error"],[67,20,64,23],[67,22,64,25],[68,8,65,6],[68,12,65,10,"error"],[68,17,65,15],[68,18,65,16,"response"],[68,26,65,24],[68,28,65,26,"status"],[68,34,65,32],[68,39,65,37],[68,42,65,40],[68,44,65,42],[69,10,66,8],[69,16,66,14],[69,20,66,18,"Error"],[69,25,66,23],[69,26,66,24],[69,72,66,70],[69,73,66,71],[70,8,67,6],[71,8,68,6],[71,14,68,12],[71,18,68,16,"Error"],[71,23,68,21],[71,24,68,22,"error"],[71,29,68,27],[71,30,68,28,"response"],[71,38,68,36],[71,40,68,38,"data"],[71,44,68,42],[71,46,68,44,"detail"],[71,52,68,50],[71,56,68,54],[71,79,68,77],[71,80,68,78],[72,6,69,4],[73,4,70,2],[73,5,70,3],[74,4,72,2],[74,10,72,8,"changeFirstPassword"],[74,29,72,27],[74,32,72,30],[74,38,72,37,"newPassword"],[74,49,72,56],[74,53,72,61],[75,6,73,4],[75,12,73,10,"api"],[75,24,73,13],[75,25,73,13,"api"],[75,28,73,13],[75,29,73,14,"post"],[75,33,73,18],[75,34,73,19],[75,66,73,51],[75,68,73,53],[76,8,73,55,"new_password"],[76,20,73,67],[76,22,73,69,"newPassword"],[77,6,73,81],[77,7,73,82],[77,8,73,83],[78,6,74,4,"setMustChangePassword"],[78,27,74,25],[78,28,74,26],[78,33,74,31],[78,34,74,32],[79,6,75,4],[79,10,75,8,"user"],[79,14,75,12],[79,16,75,14],[80,8,76,6,"setUser"],[80,15,76,13],[80,16,76,13,"Object"],[80,22,76,13],[80,23,76,13,"assign"],[80,29,76,13],[80,34,76,19,"user"],[80,38,76,23],[81,10,76,25,"must_change_password"],[81,30,76,45],[81,32,76,47],[82,8,76,52],[82,10,76,54],[82,11,76,55],[83,6,77,4],[84,4,78,2],[84,5,78,3],[85,4,80,2],[85,10,80,8,"logout"],[85,16,80,14],[85,19,80,17],[85,25,80,17,"logout"],[85,26,80,17],[85,31,80,29],[86,6,81,4],[86,12,81,10,"AsyncStorage"],[86,24,81,22],[86,25,81,22,"default"],[86,32,81,22],[86,33,81,23,"removeItem"],[86,43,81,33],[86,44,81,34],[86,56,81,46],[86,57,81,47],[87,6,82,4],[87,13,82,11,"api"],[87,25,82,14],[87,26,82,14,"api"],[87,29,82,14],[87,30,82,15,"defaults"],[87,38,82,23],[87,39,82,24,"headers"],[87,46,82,31],[87,47,82,32,"common"],[87,53,82,38],[87,54,82,39],[87,69,82,54],[87,70,82,55],[88,6,83,4,"setUser"],[88,13,83,11],[88,14,83,12],[88,18,83,16],[88,19,83,17],[89,6,84,4,"setMustChangePassword"],[89,27,84,25],[89,28,84,26],[89,33,84,31],[89,34,84,32],[90,4,85,2],[90,5,85,3],[91,4,87,2],[91,24,88,4],[91,28,88,4,"_reactJsxDevRuntime"],[91,47,88,4],[91,48,88,4,"jsxDEV"],[91,54,88,4],[91,56,88,5,"AuthContext"],[91,67,88,16],[91,68,88,17,"Provider"],[91,76,88,25],[92,6,89,6,"value"],[92,11,89,11],[92,13,89,13],[93,8,90,8,"user"],[93,12,90,12],[94,8,91,8,"isLoading"],[94,17,91,17],[95,8,92,8,"isAuthenticated"],[95,23,92,23],[95,25,92,25],[95,26,92,26],[95,27,92,27,"user"],[95,31,92,31],[96,8,93,8,"mustChangePassword"],[96,26,93,26],[97,8,94,8,"login"],[97,13,94,13],[98,8,95,8,"logout"],[98,14,95,14],[99,8,96,8,"changeFirstPassword"],[99,27,96,27],[100,8,97,8,"setMustChangePassword"],[101,6,98,6],[101,7,98,8],[102,6,98,8,"children"],[102,14,98,8],[102,16,100,7,"children"],[103,4,100,15],[104,6,100,15,"fileName"],[104,14,100,15],[104,16,100,15,"_jsxFileName"],[104,28,100,15],[105,6,100,15,"lineNumber"],[105,16,100,15],[106,6,100,15,"columnNumber"],[106,18,100,15],[107,4,100,15],[107,11,101,26],[107,12,101,27],[108,2,103,0],[109,2,103,1,"_s"],[109,4,103,1],[109,5,25,16,"AuthProvider"],[109,17,25,28],[110,2,25,28,"_c"],[110,4,25,28],[110,7,25,16,"AuthProvider"],[110,19,25,28],[111,2,105,7],[111,11,105,16,"useAuth"],[111,18,105,23,"useAuth"],[111,19,105,23],[111,21,105,26],[112,4,105,26,"_s2"],[112,7,105,26],[113,4,106,2],[113,10,106,8,"context"],[113,17,106,15],[113,20,106,18],[113,24,106,18,"useContext"],[113,30,106,28],[113,31,106,28,"useContext"],[113,41,106,28],[113,43,106,29,"AuthContext"],[113,54,106,40],[113,55,106,41],[114,4,107,2],[114,8,107,6,"context"],[114,15,107,13],[114,20,107,18,"undefined"],[114,29,107,27],[114,31,107,29],[115,6,108,4],[115,12,108,10],[115,16,108,14,"Error"],[115,21,108,19],[115,22,108,20],[115,67,108,65],[115,68,108,66],[116,4,109,2],[117,4,110,2],[117,11,110,9,"context"],[117,18,110,16],[118,2,111,0],[119,2,111,1,"_s2"],[119,5,111,1],[119,6,105,16,"useAuth"],[119,13,105,23],[120,2,105,23],[120,6,105,23,"_c"],[120,8,105,23],[121,2,105,23,"$RefreshReg$"],[121,14,105,23],[121,15,105,23,"_c"],[121,17,105,23],[122,0,105,23],[122,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","changeFirstPassword","logout","useAuth"],"mappings":"AAA;OCwB;YCK;GDE;oBEE;GFe;gBGE;GHmB;8BIE;GJM;iBKE;GLK;CDkB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}